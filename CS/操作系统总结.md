---
title: 操作系统总结
type: categories
copyright: true
date: 2020-05-26 17:32:59
tags: CS基础
categories: CS基础
---

### 前言
几次面试都是因为操作系统完全没看，非常尴尬，看到这些知识，想起了在武大的快乐时光，自己的操作系统课本都送人了，还是得总结一个

### OS四大特征
1. 并发：同时发生（并行：不同时，但连续，交替执行）
2. 共享：分互斥共享和同时共享，一段时间内只允许一个进程访问的资源叫做独占资源或者临界资源
3. 异步：类似js的异步
4. 虚拟：空分复用技术（虚拟存储器），时分复用技术（虚拟处理器）

指令是CPU能识别和执行的最基本命令，分为特权指令和非特权指令，内核程序才能执行特权指令，普通程序执行非特权指令。
CPU也有内核态和用户态两种状态。

### 进程
定义： 进程是具有独立功能的程序在数据集合上运行的过程，分配资源的基本单位，内存地址空间相互独立
 
每个进程都有一个进程控制块PCB来描述进程的各种信息，包括PID，UID，状态，优先级，指针，寄存器值等等

进程的基本状态：运行（占有CPU，在CPU上运行），就绪（缺空闲CPU）和阻塞（等待某事件）
进程的另外2种2状态：创建态（正在初始化PCB），终止态（撤销PCB，资源回收）

状态转换：运行进入阻塞是主动的（系统调用），阻塞进入就绪是被动的（其他都弄好了，就差CPU了），阻塞不能直接进入运行，就绪也不能直接进入阻塞（因为运行时才能主动请求）

原语：不可被中断的原子操作，使用关中断指令和开中断指令实现，先关再开

进程的通信：
1. 共享存储：互斥的，内存画出一块共享区
2. 管道：半双工，某一时间段只能实现单向传输，双向需要2个管道。字符流形式，管道写满时，write被阻塞，数据都读完时，read被阻塞。如果没写满，就不让读，没空就不让写。读进程只有一个。
3. 消息传递：格式化的消息为单位，通过发送消息/接受消息两个原语进行通信，包括信息头和尾
4. 间接通信：通过中介者信箱来进行通信

同步：某些进程的执行必须先于另一些进程
互斥：当某个进程使用某种资源时，其他进程必须等待
信号量：解决进程的同步和互斥，由剩余资源和阻塞队列的地址组成
生成者消费者问题：生产者的作用是生成一定量数据到缓存区，消费者消耗这些数据，保证生产者不会在满时加入数据，消费者不会在空时消耗数据，用互斥信号量实现互斥访问，同步信号量表示还可以生成多少产品和消耗多少产品


### 线程
定义：进程并发多个事件的能力，基本的CPU执行单位，程序执行流的最小单位，进程可以并发，进程的线程也可以并发，引入线程后，进程只作为除CPU外的系统资源分配单位。线程的切换比进程的切换开销小。

### 内存
内存是计算机硬件与CPU沟通的桥梁，中转站，程序执行前要先放到内存中才能被CPU处理
CPU通过内存的存储单元编址来找到执行程序的数据

连续分配：用户进程分配必须是一个连续的内存空间，包括动态分区分配，缺点是会产生内存碎片
非连续分配
动态分区分配：不会预先划分内存分区，而是动态的建立分区

空闲分区表：分区号，分区大小，起始地址，状态
首次适应算法：每次从低地址开始查找，找到第一个满足大小的空闲分区
最佳适应算法：从空闲分区表中找到最小的适合分配的分区块来满足需求
基本分页存储：把内存空间分成一个个大小相等的分区，每个分区是一个页框，进程的页与内存的页有一一对应关系

